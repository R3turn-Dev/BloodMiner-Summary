
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>블러드코인 정보 : 이은학</title>

    {{ get_global('analytics.html') | safe }}

    {{ get_global('bootstrap.html') | safe }}

    {{ get_global('font-awesome.html') | safe }}

    {{ get_global('grapher.html') | safe }}

</head>

<nav class="navbar navbar-expand-lg bg-secondary navbar-dark text-white">
    <div class="container">
        <a class="navbar-brand" href="/">블러드 코인 그래프</a>
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="?graph=total">
                        통합 그래프
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="?graph=difficulty">
                        채굴 난이도
                    </a>
                </li>
            </ul>
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" style="cursor: initial;">개발: 이은학(return0927)</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" target="_blank" href="/cdn-cgi/l/email-protection#7a13140c1513191f3a081f0e0f08144a43484d54020300">
                        <i class="fas fa-envelope-square"></i>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" target="_blank" href="https://fb.com/R3turn.01">
                        <i class="fab fa-facebook-square"></i>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" target="_blank" href="https://t.me/return0927">
                        <i class="fab fa-telegram"></i>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<body>
    <div class="BC-GraphContainer">
        <div class="BC-Graph">
            <label class="BC-Graph-Title">채굴자 수</label>
            <label class="BC-Graph-Subtitle">Worker Count</label>
            <label class="BC-Graph-Title">총 보상 가중치</label>
            <label class="BC-Graph-Subtitle">Total Point</label>
            <label class="BC-Graph-Title">총 해쉬레이트</label>
            <label class="BC-Graph-Subtitle">Total Hashrate</label>
            <div id="chart_1" style="height: 400px; min-width: 310px"></div>
        </div>
    </div>

    <hr />

    <div class="BC-GraphContainer">
        <div class="BC-Graph">
            <label class="BC-Graph-Title">총 채굴 보상</label>
            <label class="BC-Graph-Subtitle">totalReward</label>
            <label class="BC-Graph-Title">총 가중치 보상</label>
            <label class="BC-Graph-Subtitle">totalDistributed</label>
            <div id="chart_2" style="height: 400px; min-width: 310px"></div>
        </div>
    </div>

    <hr />

    <div class="BC-GraphContainer">
        <div class="BC-Graph">
            <label class="BC-Graph-Title">채굴자 수</label>
            <label class="BC-Graph-Subtitle">workerCout</label>
            <label class="BC-Graph-Title">채굴 난이도</label>
            <label class="BC-Graph-Subtitle">difficulty</label>
            <div id="chart_3" style="height: 400px; min-width: 310px"></div>
        </div>
    </div>

<div class="page-footer footer small" style="position: fixed; width: 100%; bottom: 5px;">
    <div class="footer-copyright text-center">
        Created & Hosted by <a href="https://github.com/R3turn-Dev/" target="_blank">R3turn-Dev</a>
        / Copyright ⓒ이은학 2018 All rights reserved.<br/>
        All program codes are available for everyone on
        <a href="https://github.com/R3turn-Dev/BloodMiner-Summary" target="_blank">My Github Repository</a>.
    </div>
</div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
    function createChart(chart_name, seriesOptions) {
        Highcharts.stockChart(chart_name, {
            time: {
                timezone: 'Asia/Seoul'
            },
            rangeSelector: {
                selected: 4
            },
            yAxis: {
                labels: {
                    formatter: function () {
                        return (this.value > 0 ? ' + ' : '') + this.value + '%';
                    }
                },
                plotLines: [{
                    value: 0,
                    width: 2,
                    color: 'silver'
                }]
            },
            plotOptions: {
                series: {
                    compare: 'percent',
                    showInNavigator: true
                }
            },
            tooltip: {
                pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.change}%)<br/>',
                valueDecimals: 2,
                split: true
            },
            series: seriesOptions
        });
    }

    function build(chart_name, variables) {
        var seriesCounter = 0,
            seriesOptions=[];
        $.each(variables, function (i, name) {
            $.getJSON('/api/data/' + name,    function (data) {

                seriesOptions[i] = {
                    name: name,
                    data: data
                };
                seriesCounter += 1;

                if (seriesCounter === variables.length) {
                    createChart(chart_name, seriesOptions);
                }
            });
        });
    }

    function LoadAll() {
        build(
            "chart_1",
            ["workerCount", "totalPoint", "totalHashrate"]
        );
        build(
            "chart_2",
            ["totalReward", "totalDistributed"]
        );
        build(
            "chart_3",
            ["workerCount", "difficulty"]
        );
    }

    LoadAll();
    setInterval(function(){
        LoadAll();
    }, 30000);
</script>
</body>
<style>
    html, body {
        margin-bottom: 0;
    }

    hr {
        margin: 0 100px;
    }

    .BC-GraphContainer {
        width: 100%;
        text-align: center;
    }

    .BC-Graph {
        display: inline-block;

        max-width: 1000px;
        width: 90vw;

        margin: 20px 0;
    }

    /* .BC-Graph-Title::before {
        content: "- ";
        margin-right: 10px;
    } */

    .BC-Graph-Title {
        font-size: 1.3em;
        font-weight: bold;
    }

    .BC-Graph-Subtitle {
        font-size: 0.8em;
        color: grey;
    }

    .footer {
        position: fixed;
        width: 100%;
        font-size: 13px;
        background-color: white;
        color: black;
        text-align: center;
        bottom: 0;
        padding-bottom: 0px;
    }
</style>
</html>